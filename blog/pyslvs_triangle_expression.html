<!DOCTYPE html>
<html lang="en">

<head>
      <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Triangular formulas in Pyslvs</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="https://pyslvs.github.io/blog/" rel="canonical" />

  <!-- Feed -->
        <link href="https://pyslvs.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Pyslvs.com Full Atom Feed" />
          <link href="https://pyslvs.github.io/blog/feeds/lun-shu.atom.xml" type="application/atom+xml" rel="alternate" title="Pyslvs.com Categories Atom Feed" />

  <link href="https://pyslvs.github.io/blog/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="https://pyslvs.github.io/blog/theme/css/code_blocks/tomorrow_night.css" rel="stylesheet">

  
    <link href="https://pyslvs.github.io/blog/theme/tipuesearch/tipuesearch.css" rel="stylesheet">

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


    <link href="https://pyslvs.github.io/blog/pyslvs_triangle_expression.html" rel="canonical" />

        <meta name="description" content="Triangular formula expression in Pyslvs Source code written in Python Pyslvs 中的三角形表示式 Python 版本的原始碼">

        <meta name="author" content="Yuan Chang">

        <meta name="tags" content="expression">




<!-- Open Graph -->
<meta property="og:site_name" content="Pyslvs.com"/>
<meta property="og:title" content="Triangular formulas in Pyslvs"/>
<meta property="og:description" content="Triangular formula expression in Pyslvs Source code written in Python Pyslvs 中的三角形表示式 Python 版本的原始碼"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://pyslvs.github.io/blog/pyslvs_triangle_expression.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2018-04-17 21:00:00+08:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://pyslvs.github.io/blog/author/yuan-chang.html">
  <meta property="article:publisher" content="https://facebook.com/myprofile" />
<meta property="article:section" content="論述"/>
<meta property="article:tag" content="expression"/>
<meta property="og:image" content="https://pyslvs.github.io/blog/theme/images/post-bg.jpg">

<!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@myprofile">
    <meta name="twitter:title" content="Triangular formulas in Pyslvs">
    <meta name="twitter:url" content="https://pyslvs.github.io/blog/pyslvs_triangle_expression.html">

        <meta name="twitter:image:src" content="https://pyslvs.github.io/blog/theme/images/post-bg.jpg">

      <meta name="twitter:description" content="Triangular formula expression in Pyslvs Source code written in Python Pyslvs 中的三角形表示式 Python 版本的原始碼">

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Triangular formulas in Pyslvs",
  "headline": "Triangular formulas in Pyslvs",
  "datePublished": "2018-04-17 21:00:00+08:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Yuan Chang",
    "url": "https://pyslvs.github.io/blog/author/yuan-chang.html"
  },
  "image": "https://pyslvs.github.io/blog/theme/images/post-bg.jpg",
  "url": "https://pyslvs.github.io/blog/pyslvs_triangle_expression.html",
  "description": "Triangular formula expression in Pyslvs Source code written in Python Pyslvs 中的三角形表示式 Python 版本的原始碼"
}
</script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shCore.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushJScript.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushJava.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushPython.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushSql.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushXml.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushPhp.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushCpp.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushCss.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushCSharp.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushBash.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushLua.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushMakefile.min.js"></script>
<script type="text/javascript" src="./../data/syntaxhighlighter/shBrushMakefile.js"></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "./../data/syntaxhighlighter/shCore.css";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "./../data/syntaxhighlighter/shThemeDefault.css?ver=3.0.9b";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.strings.expandSource = '+ expand source';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>

</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

              <li role="presentation"><a href="https://pyslvs.github.io/blog/pages/about/">About</a></li>

            <li><a href="https://pyslvs.github.io/blog/archives.html">Archives</span></a></li>
            
            <li><a href="https://pyslvs.github.io/blog/categories.html">Categories</span></a></li>
            
            <li><a href="https://pyslvs.github.io/blog/tags.html">Tags</span></a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="https://pyslvs.github.io/blog/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Triangular formulas in Pyslvs</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="https://pyslvs.github.io/blog/author/yuan-chang.html">Yuan Chang</a>
            | <time datetime="Tue 17 April 2018">Tue 17 April 2018</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('https://pyslvs.github.io/blog/theme/images/post-bg.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

<section class="search">
      <form class="navbar-search" action="https://pyslvs.github.io/blog/search.html">
      <input type="text"  placeholder="Search" name="q" id="tipue_search_input" required>
    </form>
</section>


    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <ul>
<li>Triangular formula expression in Pyslvs</li>
<li>
<p>Source code written in Python</p>
</li>
<li>
<p>Pyslvs 中的三角形表示式</p>
</li>
<li>Python 版本的原始碼</li>
</ul>


<h1>Triangular formulas in Pyslvs</h1>
<p>In order to reach the simulation of mechanism motion path, Pyslvs takes three geometric solutions to meets the joint types in PMKS.</p>
<ul>
<li>PLA(P): Through two (or one) known point(s), distance of reference point to the target point, and an angle value of them (or horizontal line), we can find the coordinate of target point.</li>
<li>PLLP: Through two known points, two distances of two reference points to the target point, we can find the coordinate of target point.</li>
<li>PLPP: Through a known point, distance of reference point to the target point, a straight line between two known points, we can find the coordinate of target point that is on the line.</li>
</ul>
<p>為了達成機構路徑的模擬，以符合 PMKS 所能模擬的接頭種類，Pyslvs 採用三種幾何解法：</p>
<ul>
<li>PLA(P)：透過兩個（或一個）已知點、基準點至目標點距離，及其（與水平線）的夾角，可以求得目標點座標。</li>
<li>PLLP：透過兩個已知點、兩基準點至目標點距離，可以求得目標點座標。</li>
<li>PLPP：透過一個已知點、基準點至目標點距離、已知兩點連成的直線，可以求得目標點在直線上的座標。</li>
</ul>
<p><strong>PLAP</strong></p>
<p><img alt="" src="https://raw.githubusercontent.com/coursemdetw/project_site_files/gh-pages/files/pyslvs/PLAP.png"></p>
<p><strong>PLLP</strong></p>
<p><img alt="" src="https://raw.githubusercontent.com/coursemdetw/project_site_files/gh-pages/files/pyslvs/PLLP.png"></p>
<p><strong>PLPP</strong></p>
<p><img alt="" src="https://raw.githubusercontent.com/coursemdetw/project_site_files/gh-pages/files/pyslvs/PLPP.png"></p>
<h2>Expression</h2>
<p>Pyslvs is using the expression to solving coordinates as below:</p>
<p>Pyslvs 使用函式解題的表示法如下：</p>
<pre>
Function[parameter0, parameter1, parameter2, ...](Target); ...
</pre>

<p>After determined the target point by arguments, it can be use as a parameter to calculate next formula.</p>
<p>For example, the coordinates of a four bar linkage mechanism can be find out with three formulas:</p>
<p>當透過輸入端求解之後，可以透過解出的目標點繼續求解。</p>
<p>例如，一個四連桿機構可以透過三個函式求解：</p>
<pre>
#Known: a0, P0, P2, L0, L1, L2, L3, L4
PLAP[P0, L0, a0](P1); PLLP[P1, L1, L2, P2](P3); PLLP[P1, L3, L4, P3](P4)
</pre>

<h2>Source code</h2>
<p>There has input and output types of Cython function, and the calculation method as Python version.</p>
<p>這裡提供 Cython 的輸入輸出類型與 Python 版本的運算方法。</p>
<p><strong>PLAP</strong></p>
<pre class="brush: c">
tuple PLAP(Coordinate A, double L0, double a0, Coordinate B=0, bool inverse=false);
</pre>

<pre class="brush: python">
def PLAP(A, L0, a0, B=None, inverse=False):
    """Point on circle by angle."""
    a1 = atan2(B.y - A.y, B.x - A.x) if B else 0
    if inverse:
        return (A.x + L0*cos(a1 - a0), A.y + L0*sin(a1 - a0))
    else:
        return (A.x + L0*cos(a1 + a0), A.y + L0*sin(a1 + a0))
</pre>

<p><strong>PLLP</strong></p>
<pre class="brush: c">
tuple PLLP(Coordinate A, double L0, double L1, Coordinate B, bool inverse=false);
</pre>

<pre class="brush: python">
def PLLP(A, L0, L1, B, inverse=False):
    """Two intersection points of two circles."""
    dx = B.x - A.x
    dy = B.y - A.y
    d = A.distance(B)

    #No solutions, the circles are separate.
    if d > L0 + L1:
        return (nan, nan)

    #No solutions because one circle is contained within the other.
    if d < abs(L0 - L1):
        return (nan, nan)

    #Circles are coincident and there are an infinite number of solutions.
    if (d == 0) and (L0 == L1):
        return (nan, nan)
    a = (L0*L0 - L1*L1 + d*d)/(2*d)
    h = sqrt(L0*L0 - a*a)
    xm = A.x + a*dx/d
    ym = A.y + a*dy/d

    if inverse:
        return (xm + h*dy/d, ym - h*dx/d)
    else:
        return (xm - h*dy/d, ym + h*dx/d)
</pre>

<p><strong>PLPP</strong></p>
<pre class="brush: c">
tuple PLPP(Coordinate A, double L0, Coordinate B, Coordinate C, bool inverse=false);
</pre>

<pre class="brush: python">
def PLAP(A, L0, B, C, inverse=False):
    """Two intersection points of a line and a circle."""
    line_mag = B.distance(C)
    dx = C.x - B.x
    dy = C.y - B.y
    u = ((A.x - B.x)*dx + (A.y - B.y)*dy) / (line_mag*line_mag)
    I = Coordinate(B.x + u*dx, B.y + u*dy)

    #Test distance between point A and intersection.
    d = A.distance(I)
    if d > L0:
        #No intersection.
        return (nan, nan)
    elif d == L0:
        #One intersection point.
        return (I.x, I.y)

    #Two intersection points.
    d = sqrt(L0*L0 - d*d) / line_mag
    dx *= d
    dy *= d
    if inverse:
        return (I.x - dx, I.y - dy)
    else:
        return (I.x + dx, I.y + dy)
</pre>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Triangular formulas in Pyslvs&amp;url=https://pyslvs.github.io/blog/pyslvs_triangle_expression.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://pyslvs.github.io/blog/pyslvs_triangle_expression.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=https://pyslvs.github.io/blog/pyslvs_triangle_expression.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://pyslvs.github.io/blog/tag/expression.html">expression</a>                </aside>

                <div class="clear"></div>


                </section>

                <script type="text/javascript">
                    var disqus = 'pyslvs-com';
                    var disqus_shortname = 'pyslvs-com';
                    var disqus_identifier = '/pyslvs_triangle_expression.html';
                    var disqus_url = 'https://pyslvs.github.io/blog/pyslvs_triangle_expression.html';
                </script>
                <noscript>Please enable JavaScript to view the comments.</noscript>
                <section class="post-comments">
                        <a id="show-disqus" class="post-comments-activate" data-disqus-identifier="/pyslvs_triangle_expression.html" >Show Comments</a>
                    <div id="disqus_thread"></div>
                </section>

                <aside class="post-nav">
                    <a class="post-nav-prev" href="https://pyslvs.github.io/blog/yuan_2018-04-09.html">
                        <section class="post-nav-teaser">
                            <i class="ic ic-arrow-right"></i>
                                <h2 class="post-nav-title">Pyslvs v18.4.0 - 04/09</h2>
                            <p class="post-nav-excerpt">Application of auto configuration algorithm 自動配置演算法的應用</p>
                        </section>
                    </a>
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>
  
  <script type="text/javascript" src="https://pyslvs.github.io/blog/theme/js/script.js"></script>

<script type="text/javascript">
    var disqus_shortname = 'pyslvs-com';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
 


</body>
</html>